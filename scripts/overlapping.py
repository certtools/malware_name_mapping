#!/usr/bin/python3

# SPDX-FileCopyrightText: 2018 nic.at GmbH
# SPDX-FileCopyrightText: 2023 Institute for Common Good Technology commongoodtechnology.org
#
# SPDX-License-Identifier: CC0-1.0

# -*- coding: utf-8 -*-
import sys

from common import load_mapping

try:
    import exrex
except ImportError:
    print("Error: Python module exrex is needed but not available.", file=sys.stderr)
    sys.exit(2)

expressions = {line[0] for line in load_mapping()}


known = set()
for expression in expressions:
    for ind, result in enumerate(exrex.generate(expression)):
        if result in known:
            print('Found overlap: %r.' % result)
        else:
            known.add(result)
        if ind > 100:
            print('Stop generating expressions for %r.' % expression)
            break
